<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<title>Polynomial Calculator</title>
<style type="text/css">
html {padding: 10px 10px 200px; font-family: droid sans, sans-serif; }
body {margin: 0 auto; max-width: 580px; }
body > article > *:first-child {margin-top: 0; }
article p {line-height: 1.4em; font-size: 17px; }

textarea {width: 500px; height: 60px; padding: 10px; }
#answer, #multiline {font-family: monospace; font-size: 14px; }
sup {
    line-height: 0.5em;
    vertical-align: baseline;
    position: relative;
    top: -0.3em;
    font-family: monospace; font-size: 14px;
}
#multiline {line-height: 80%; }
</style>

<body>
<article id="calculator">
<h1>Polynomial Calculator</h1>
<p><button onclick="simplify()">Calculate</button>
<p>Type in polynomial terms using numbers, letters, and the +, -, *, and / operators only
<p><textarea id="eq">3y*y + 4x + 8 / 2 - 3</textarea>
<h3>Strict Notation</h3>
<p>An effort is made to massage the input into a more rigid syntax for easy parsing.
<p><textarea id="strict"></textarea>
<p>Answer
<p><pre id="answer"></pre>
<p>Multiline
<p><pre id="multiline"></pre>
<p>Add
<p><textarea id="eqAdd">9f</textarea>
<p>Result
<p><pre id="add"></pre>
<p>Substitute {x: 5}
<p><pre id="evaluate"></pre>
</article>

<script src="poly.js"></script>
<script>
function simplify() {
    var reEq = /[^0-9a-zA-Z\s\+\-\/\*]/g,
        eq = new poly(document.getElementById('eq').value);

    document.getElementById('strict').value = eq.strict;
    document.getElementById('answer').innerHTML = eq.format();
    document.getElementById('multiline').innerHTML = eq.format(true);
    
    eq.add(document.getElementById('eqAdd').value);
    document.getElementById('add').innerHTML = eq.format(true);
    document.getElementById('evaluate').innerHTML = eq.substitute({'x': 5});
}

window.onload = simplify;
/*
Wow, this is fun and complex. Here are a few things I've learned so far.

There should be 3 types of polynomial representation:

    1. Human read and writeable
    2. Rigid grammar (Single spaced between all numbers, operators and identifiers, no unary signs (+, -))
    3. Object representation

("Identifiers"? We need to call words something that can be both variables, constants, and units.)

There can be steps to convert from human-formatted to rigid
There is a parser to change rigid to object
There could be a process to convert object directly to human readable

You should be able to add, subtract, multiply and divide polynomial
Multiply will be most common, You could have one like so (rigid syntax):

Circumference: poly('r * cm * 3.1415')
CmToIn: poly('in / 2.54cm')
CircAndConvertCmToIn: Circumference * CmToIn
    > r * in * 1.24 `valid polynomial`

Calculate a polynomial by replacing variables with numbers
CircAndConvertCmToIn.calc({r: 1.0})
    > 1.24in `polynomial (because it includes an identifier) get the value with poly.calc({r: 1.0}).num`

Wait, that's weird. Should the input be specified as cm? I mean, it doesn't have to be, it's just recommended.

You could do the same like so:

CircAndConvertCmToIn * poly('1.0 / r')

Calculus
--------

SalesTrajectory: p(2x + 3)
SalesTrajectory.d()
    > 2 `This is a polynomial`
SalesTrajectory.d({x: 100})
    > 2 `This is a number - It is 2 for all x, so, you know`

SalesTrajectory.i()
    > x^2 + 3x + C `polynomial`
SalesTrajectory.i({x: [100, 110]})
    > 2130 `number`

*/
</script>
